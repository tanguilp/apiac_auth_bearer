<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1215" height="641">
<!--
Generated on https://sequencediagram.org from the following commands:

Client->APIacAuthBearer: HTTP request with bearer token
APIacAuthBearer<-APIacAuthBearer:extracts bearer (from header, body or query param)
APIacAuthBearer->APIacAuthBearer.Cache:gets bearer data from cache
APIacAuthBearer<-APIacAuthBearer.Cache:caches response (bearer data, or nothing)

par Bearer not found in cache
APIacAuthBearer->APIacAuthBearer.Validator:forwards bearer
APIacAuthBearer.Validator->APIacAuthBearer.Validator:validates bearer
APIacAuthBearer<-APIacAuthBearer.Validator:returns bearer data
APIacAuthBearer->APIacAuthBearer.Cache:saves bearer in cache
end

APIacAuthBearer<-APIacAuthBearer:sets APIac data in Plug.Conn


APIacAuthBearer->Next plug:Plug pipeline execution continues
-->
<defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1215" height="641"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 44.899658982 50.815047804 L 44.899658982 641.8980964440001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 318.10939018199997 50.815047804 L 318.10939018199997 641.8980964440001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 731.7535803819999 50.815047804 L 731.7535803819999 641.8980964440001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 971.5528983459999 50.815047804 L 971.5528983459999 641.8980964440001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1155.85221631 50.815047804 L 1155.85221631 641.8980964440001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 7.5393246000000005 10.102694964000001 L 82.259993364 10.102694964000001 L 82.259993364 50.815047804 L 7.5393246000000005 50.815047804 L 7.5393246000000005 10.102694964000001 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="23.899658982" y="35.736398604" text-anchor="start" dominant-baseline="alphabetic">Client</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 235.24905579999995 10.102694964000001 L 400.969724564 10.102694964000001 L 400.969724564 50.815047804 L 235.24905579999995 50.815047804 L 235.24905579999995 10.102694964000001 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="251.60939018199997" y="35.736398604" text-anchor="start" dominant-baseline="alphabetic">APIacAuthBearer</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 624.3932459999999 10.102694964000001 L 839.1139147639999 10.102694964000001 L 839.1139147639999 50.815047804 L 624.3932459999999 50.815047804 L 624.3932459999999 10.102694964000001 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="640.7535803819999" y="35.736398604" text-anchor="start" dominant-baseline="alphabetic">APIacAuthBearer.Cache</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 854.1925639639999 10.102694964000001 L 1088.913232728 10.102694964000001 L 1088.913232728 50.815047804 L 854.1925639639999 50.815047804 L 854.1925639639999 10.102694964000001 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="870.5528983459999" y="35.736398604" text-anchor="start" dominant-baseline="alphabetic">APIacAuthBearer.Validator</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1103.9918819279999 10.102694964000001 L 1207.712550692 10.102694964000001 L 1207.712550692 50.815047804 L 1103.9918819279999 50.815047804 L 1103.9918819279999 10.102694964000001 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1120.35221631" y="35.736398604" text-anchor="start" dominant-baseline="alphabetic">Next plug</text></g></g><g><g><g><rect fill="white" stroke="none" x="62.74272720199999" y="80.97234620399999" width="237.52359476" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="65.00452458199999" y="94.54313048399999" text-anchor="start" dominant-baseline="alphabetic">HTTP request with bearer token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 44.899658982 100.574590164 L 315.596281982 100.574590164" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(318.10939018199997,100.574590164) translate(-318.10939018199997,-100.574590164)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 305.543849182 94.291819664 L 318.10939018199997 100.574590164 L 305.543849182 106.857360664 Z"/></g></g><g><g><rect fill="white" stroke="none" x="335.95245840199993" y="123.19256396399999" width="390.52359476" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="338.21425578199995" y="136.76334824399999" text-anchor="start" dominant-baseline="alphabetic">extracts bearer (from header, body or query param)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 318.10939018199997 142.794807924 L 378.423986982 142.794807924 L 378.423986982 157.873457124 L 320.62249838199995 157.873457124" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(318.10939018199997,157.873457124) translate(-318.10939018199997,-157.873457124)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 330.67493118199997 151.590686624 L 318.10939018199997 157.873457124 L 330.67493118199997 164.156227624 Z"/></g></g><g><g><rect fill="white" stroke="none" x="417.6696879019999" y="180.49143092399999" width="214.52359476" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="419.9314852819999" y="194.06221520399998" text-anchor="start" dominant-baseline="alphabetic">gets bearer data from cache</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 318.10939018199997 200.093674884 L 729.2404721819998 200.093674884" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(731.7535803819999,200.093674884) translate(-731.7535803819999,-200.093674884)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 719.1880393819998 193.810904384 L 731.7535803819999 200.093674884 L 719.1880393819998 206.376445384 Z"/></g></g><g><g><rect fill="white" stroke="none" x="367.1696879019999" y="222.71164868399998" width="315.52359476" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="369.4314852819999" y="236.28243296399998" text-anchor="start" dominant-baseline="alphabetic">caches response (bearer data, or nothing)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 731.7535803819999 242.313892644 L 320.62249838199995 242.313892644" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(318.10939018199997,242.313892644) translate(-318.10939018199997,-242.313892644)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 330.67493118199997 236.031122144 L 318.10939018199997 242.313892644 L 330.67493118199997 248.596663144 Z"/></g></g><g><g><rect fill="white" stroke="none" x="584.069346884" y="305.64421928400003" width="121.52359476" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="586.3311442639999" y="319.2150035640001" text-anchor="start" dominant-baseline="alphabetic">forwards bearer</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 318.10939018199997 325.24646324400004 L 969.0397901459999 325.24646324400004" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(971.5528983459999,325.24646324400004) translate(-971.5528983459999,-325.24646324400004)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 958.9873573459998 318.963692744 L 971.5528983459999 325.24646324400004 L 958.9873573459998 331.52923374400007 Z"/></g></g><g><g><rect fill="white" stroke="none" x="989.395966566" y="347.86443704400006" width="124.52359476" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="991.6577639459999" y="361.43522132400005" text-anchor="start" dominant-baseline="alphabetic">validates bearer</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 971.5528983459999 367.46668100400007 L 1031.8674951459998 367.46668100400007 L 1031.8674951459998 382.54533020400004 L 974.0660065459999 382.54533020400004" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(971.5528983459999,382.54533020400004) translate(-971.5528983459999,-382.54533020400004)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 984.118439346 376.262559704 L 971.5528983459999 382.54533020400004 L 984.118439346 388.82810070400006 Z"/></g></g><g><g><rect fill="white" stroke="none" x="570.569346884" y="405.16330400400005" width="148.52359476" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="572.8311442639999" y="418.7340882840001" text-anchor="start" dominant-baseline="alphabetic">returns bearer data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 971.5528983459999 424.76554796400006 L 320.62249838199995 424.76554796400006" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(318.10939018199997,424.76554796400006) translate(-318.10939018199997,-424.76554796400006)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 330.67493118199997 418.48277746400004 L 318.10939018199997 424.76554796400006 L 330.67493118199997 431.0483184640001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="441.6696879019999" y="447.3835217640001" width="166.52359476" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="443.9314852819999" y="460.9543060440001" text-anchor="start" dominant-baseline="alphabetic">saves bearer in cache</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 318.10939018199997 466.9857657240001 L 729.2404721819998 466.9857657240001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(731.7535803819999,466.9857657240001) translate(-731.7535803819999,-466.9857657240001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 719.1880393819998 460.70299522400006 L 731.7535803819999 466.9857657240001 L 719.1880393819998 473.2685362240001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="335.95245840199993" y="512.2217133240001" width="224.52359476" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="338.21425578199995" y="525.7924976040001" text-anchor="start" dominant-baseline="alphabetic">sets APIac data in Plug.Conn</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 318.10939018199997 531.8239572840001 L 378.423986982 531.8239572840001 L 378.423986982 546.9026064840001 L 320.62249838199995 546.9026064840001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(318.10939018199997,546.9026064840001) translate(-318.10939018199997,-546.9026064840001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 330.67493118199997 540.6198359840001 L 318.10939018199997 546.9026064840001 L 330.67493118199997 553.1853769840001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="611.719005866" y="569.5205802840001" width="250.52359476" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="613.9808032459999" y="583.0913645640001" text-anchor="start" dominant-baseline="alphabetic">Plug pipeline execution continues</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 318.10939018199997 589.1228242440001 L 1153.3391081099999 589.1228242440001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(1155.85221631,589.1228242440001) translate(-1155.85221631,-589.1228242440001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1143.28667531 582.8400537440001 L 1155.85221631 589.1228242440001 L 1143.28667531 595.405594744 Z"/></g></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 265.33411798199995 264.93186644400004 L 1119.1970885459998 264.93186644400004 L 1119.1970885459998 489.6037395240001 L 265.33411798199995 489.6037395240001 L 265.33411798199995 264.93186644400004 Z" stroke-miterlimit="10" stroke-width="2.154092742857143" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 265.33411798199995 264.93186644400004 L 265.33411798199995 283.026245484 L 317.49141638199995 283.026245484 L 326.538605902 273.97905596400005 L 326.538605902 264.93186644400004 L 265.33411798199995 264.93186644400004" stroke-miterlimit="10" stroke-width="2.154092742857143" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="280.4127671819999" y="276.994785804" text-anchor="start" dominant-baseline="alphabetic">par</text><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="341.61725510199994" y="276.994785804" text-anchor="start" dominant-baseline="alphabetic">[Bearer not found in cache]</text></g></g><g/><g/><g/><g/><g/></g></svg>
